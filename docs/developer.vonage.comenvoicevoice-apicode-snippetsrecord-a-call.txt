Use Cases
Documentation
SDKs & Tools
Community
Blog
API Dashboard
Vonage.com
Pricing
Support
English
中文
日本語
My profile
My dashboard
Log out
Voice
Voice API
Overview
Concepts
Guides
Code Snippets
Before you begin
Make an outbound call with an NCCO
Connect an inbound call
Download a recording
Earmuff a call
Handle user input with ASR
Handle user input with DTMF
Connect callers into a conference
Make an outbound call
Mute a call
Play an audio stream into a call
Play DTMF into a call
Play text-to-speech into a call
Receive an inbound call
Record a call with split audio
Record a call
Record a conversation
Record a message
Retrieve information for a call
Retrieve information for all calls
Transfer a call
Transfer a call with inline NCCO
Track NCCO progress
Tutorials
Voice Inspector (Beta)
NCCO Reference
Webhook Reference
API Reference
SIP
Record a call

A code snippets that shows how to answer an incoming call and set it up to record, then connect the call. When the call is completed, the eventUrl you specify in the record action of the NCCO will receive a webhook including the URL of the recording for download.

Example

Replace the following variables in the example code:

Key	Description
VONAGE_NUMBER	

Your Vonage Number. E.g. 447700900000


TO_NUMBER	

The number you are calling. E.g. 447700900001

Prerequisites
Write the code

Add the following to record-a-call.js:

require('dotenv').config({path: __dirname + '/../.env'})


const TO_NUMBER = process.env.TO_NUMBER
const VONAGE_NUMBER = process.env.VONAGE_NUMBER

const app = require('express')()
const bodyParser = require('body-parser')

app.use(bodyParser.json())

const onInboundCall = (request, response) => {
  const ncco = [{
      action: "record",
      eventUrl: [`${request.protocol}://${request.get('host')}/webhooks/recordings`]
    },
    {
      action: "connect",
      from: VONAGE_NUMBER,
      endpoint: [{
        type: "phone",
        number: TO_NUMBER
      }]
    }
  ]
  response.json(ncco)
}

const onRecording = (request, response) => {
  const recording_url = request.body.recording_url
  console.log(`Recording URL = ${recording_url}`)

  response.status(204).send()
}

app
  .get('/webhooks/answer', onInboundCall)
  .post('/webhooks/recordings', onRecording)

app.listen(3000)
Copy

View full source

Run your code

Save this file to your machine and run it:

Copy
node record-a-call.js
Try it out

You will need to:

Answer and record the call (this code snippet).
Download the recording. See the Download a recording code snippet for how to do this.
Feedback